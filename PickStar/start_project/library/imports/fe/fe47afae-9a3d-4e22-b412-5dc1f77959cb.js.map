{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Player.js"],"names":["cc","Class","extends","Component","properties","jumpHeight","jumpDuration","maxMoveSpeed","accel","winWidth","halfWinWidth","touchListener","jumpAudio","default","type","AudioClip","setJumpAction","jumpUp","moveBy","v2","easing","easeCubicActionOut","jumpDown","callback","callFunc","playJumpSound","repeatForever","sequence","audioEngine","playEffect","onKeyDown","event","keyCode","macro","KEY","a","accLeft","d","accRight","onKeyUp","setInputControl","self","eventManager","addListener","EventListener","TOUCH_ONE_BY_ONE","onTouchBegan","touch","touchLoc","getLocation","onTouchEnded","node","onLoad","director","getWinSize","jumpAction","runAction","xSpeed","systemEvent","on","SystemEvent","EventType","KEY_DOWN","KEY_UP","onDestroy","off","onKeyUP","start","update","dt","Math","abs","x"],"mappings":"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","file":"Player.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n\r\n        jumpHeight: 0,\r\n        jumpDuration: 0,\r\n        maxMoveSpeed: 0,\r\n        accel: 0,\r\n        \r\n        winWidth:0,\r\n        halfWinWidth:0,\r\n\r\n        touchListener: null,\r\n       // ground: cc.Node,\r\n        jumpAudio: {\r\n            default: null,\r\n            type: cc.AudioClip,\r\n        },\r\n    },\r\n    \r\n    setJumpAction: function () {\r\n        var jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n        var jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n        var callback = cc.callFunc(this.playJumpSound, this);\r\n        return cc.repeatForever(cc.sequence(jumpUp, jumpDown, callback));\r\n\r\n    },\r\n    playJumpSound: function () {\r\n        cc.audioEngine.playEffect(this.jumpAudio, false);\r\n    },\r\n\r\n    onKeyDown(event) {\r\n        switch ((event.keyCode)) {\r\n            case  cc.macro.KEY.a:\r\n                this.accLeft = true;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = true;\r\n                break;\r\n        }\r\n    },\r\n    onKeyUp(event) {\r\n        // unset a flag when key released\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = false;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = false;\r\n                break;\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    setInputControl: function () {\r\n        var self = this;    \r\n        // 触摸输入\r\n        cc.eventManager.addListener({\r\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\r\n            onTouchBegan: function(touch, event) {\r\n                var touchLoc = touch.getLocation();\r\n                //可以根据触摸的位置执行不同的动作\r\n                //执行相应的动作\r\n                return true;\r\n            },\r\n            onTouchEnded: function(touch, event) {\r\n\r\n            }\r\n        }, self.node);\r\n        //setInputControl();\r\n    },\r\n\r\n\r\n    onLoad: function () {\r\n        this.winWidth=cc.director.getWinSize();\r\n        this.halfWinWidth=this.winWidth/2;\r\n        this.jumpAction = this.setJumpAction();\r\n        this.node.runAction(this.jumpAction);\r\n\r\n        this.accLeft = false;\r\n        this.accRight = false;\r\n\r\n        this.xSpeed = 0;\r\n\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    },\r\n\r\n    onDestroy() {\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUP, this);\r\n\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    update(dt) { //dt是时间把？\r\n        if (this.accLeft) {\r\n            this.xSpeed -= this.accel * dt;\r\n        } else if (this.accRight) {\r\n            this.xSpeed += this.accel * dt;\r\n        }\r\n        if (Math.abs(this.xSpeed) > this.maxMoveSpeed) {\r\n            this.xSpeed = this.maxMoveSpeed * this.xSpeed / Math.abs(this.xSpeed);//额不就是要个符号\r\n        }\r\n        this.node.x += this.xSpeed * dt;\r\n        if(this.node.x<-this.halfWinWidth)node.x+=960;\r\n        else if(this.node.x>this.halfWinWidth)this.node.x-=960;\r\n    },\r\n});\r\n"]}